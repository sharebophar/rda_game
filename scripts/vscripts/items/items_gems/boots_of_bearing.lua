item_boots_of_bearing_lua_gem1  = item_boots_of_bearing_lua_gem1 or class({})
item_boots_of_bearing_lua2_gem1 = item_boots_of_bearing_lua_gem1 or class({})
item_boots_of_bearing_lua3_gem1 = item_boots_of_bearing_lua_gem1 or class({})
item_boots_of_bearing_lua4_gem1 = item_boots_of_bearing_lua_gem1 or class({})
item_boots_of_bearing_lua5_gem1 = item_boots_of_bearing_lua_gem1 or class({})
item_boots_of_bearing_lua6_gem1 = item_boots_of_bearing_lua_gem1 or class({})
item_boots_of_bearing_lua7_gem1 = item_boots_of_bearing_lua_gem1 or class({})
item_boots_of_bearing_lua8_gem1 = item_boots_of_bearing_lua_gem1 or class({})

item_boots_of_bearing_lua_gem2  = item_boots_of_bearing_lua_gem2 or class({})
item_boots_of_bearing_lua2_gem2 = item_boots_of_bearing_lua_gem2 or class({})
item_boots_of_bearing_lua3_gem2 = item_boots_of_bearing_lua_gem2 or class({})
item_boots_of_bearing_lua4_gem2 = item_boots_of_bearing_lua_gem2 or class({})
item_boots_of_bearing_lua5_gem2 = item_boots_of_bearing_lua_gem2 or class({})
item_boots_of_bearing_lua6_gem2 = item_boots_of_bearing_lua_gem2 or class({})
item_boots_of_bearing_lua7_gem2 = item_boots_of_bearing_lua_gem2 or class({})
item_boots_of_bearing_lua8_gem2 = item_boots_of_bearing_lua_gem2 or class({})

item_boots_of_bearing_lua_gem3  = item_boots_of_bearing_lua_gem3 or class({})
item_boots_of_bearing_lua2_gem3 = item_boots_of_bearing_lua_gem3 or class({})
item_boots_of_bearing_lua3_gem3 = item_boots_of_bearing_lua_gem3 or class({})
item_boots_of_bearing_lua4_gem3 = item_boots_of_bearing_lua_gem3 or class({})
item_boots_of_bearing_lua5_gem3 = item_boots_of_bearing_lua_gem3 or class({})
item_boots_of_bearing_lua6_gem3 = item_boots_of_bearing_lua_gem3 or class({})
item_boots_of_bearing_lua7_gem3 = item_boots_of_bearing_lua_gem3 or class({})
item_boots_of_bearing_lua8_gem3 = item_boots_of_bearing_lua_gem3 or class({})

item_boots_of_bearing_lua_gem4  = item_boots_of_bearing_lua_gem4 or class({})
item_boots_of_bearing_lua2_gem4 = item_boots_of_bearing_lua_gem4 or class({})
item_boots_of_bearing_lua3_gem4 = item_boots_of_bearing_lua_gem4 or class({})
item_boots_of_bearing_lua4_gem4 = item_boots_of_bearing_lua_gem4 or class({})
item_boots_of_bearing_lua5_gem4 = item_boots_of_bearing_lua_gem4 or class({})
item_boots_of_bearing_lua6_gem4 = item_boots_of_bearing_lua_gem4 or class({})
item_boots_of_bearing_lua7_gem4 = item_boots_of_bearing_lua_gem4 or class({})
item_boots_of_bearing_lua8_gem4 = item_boots_of_bearing_lua_gem4 or class({})

item_boots_of_bearing_lua_gem5  = item_boots_of_bearing_lua_gem5 or class({})
item_boots_of_bearing_lua2_gem5 = item_boots_of_bearing_lua_gem5 or class({})
item_boots_of_bearing_lua3_gem5 = item_boots_of_bearing_lua_gem5 or class({})
item_boots_of_bearing_lua4_gem5 = item_boots_of_bearing_lua_gem5 or class({})
item_boots_of_bearing_lua5_gem5 = item_boots_of_bearing_lua_gem5 or class({})
item_boots_of_bearing_lua6_gem5 = item_boots_of_bearing_lua_gem5 or class({})
item_boots_of_bearing_lua7_gem5 = item_boots_of_bearing_lua_gem5 or class({})
item_boots_of_bearing_lua8_gem5 = item_boots_of_bearing_lua_gem5 or class({})

LinkLuaModifier("modifier_boots_of_bearing_lua_speed_aura", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_boots_of_bearing_lua_yaskorost", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_boots_of_bearing_lua_active", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)


LinkLuaModifier("modifier_boots_of_bearing_lua", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_boots_of_bearing_lua2", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_boots_of_bearing_lua3", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_boots_of_bearing_lua4", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_boots_of_bearing_lua5", "items/items_gems/boots_of_bearing", LUA_MODIFIER_MOTION_NONE)

LinkLuaModifier("modifier_gem1", 'items/items_gems/gem1', LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_gem2", 'items/items_gems/gem2', LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_gem3", 'items/items_gems/gem3', LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_gem4", 'items/items_gems/gem4', LUA_MODIFIER_MOTION_NONE)
LinkLuaModifier("modifier_gem5", 'items/items_gems/gem5', LUA_MODIFIER_MOTION_NONE)

modifier_boots_of_bearing_lua = class({})
modifier_boots_of_bearing_lua_speed_aura = class({})
modifier_boots_of_bearing_lua_aura_positive = class({})
modifier_boots_of_bearing_lua_aura_positive_effect = class({})
modifier_boots_of_bearing_lua_yaskorost = class ({})
modifier_boots_of_bearing_lua_active = class ({})

modifier_boots_of_bearing_lua  = class ({})
modifier_boots_of_bearing_lua2 = class ({})
modifier_boots_of_bearing_lua3 = class ({})
modifier_boots_of_bearing_lua4 = class ({})
modifier_boots_of_bearing_lua5 = class ({})

-----------------------------------------------------speed_aura----------------------------------------
function modifier_boots_of_bearing_lua_speed_aura:IsHidden() return true end
function modifier_boots_of_bearing_lua_speed_aura:IsPurgable() return false end
function modifier_boots_of_bearing_lua_speed_aura:RemoveOnDeath() return false end
function modifier_boots_of_bearing_lua_speed_aura:IsDebuff() return false end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua_speed_aura:GetAuraRadius()
    if self:GetAbility() then
        return self:GetAbility():GetSpecialValueFor("radius")
    end
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua_speed_aura:GetAuraSearchFlags()
    return DOTA_UNIT_TARGET_FLAG_NONE
end

function modifier_boots_of_bearing_lua_speed_aura:GetAuraSearchTeam()
    return DOTA_UNIT_TARGET_TEAM_FRIENDLY
end

function modifier_boots_of_bearing_lua_speed_aura:GetAuraSearchType()
    return DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC
end
---------------------------------------------------lua_yaskorost-------------------------------------------------------
function modifier_boots_of_bearing_lua_yaskorost:IsHidden() return false end
function modifier_boots_of_bearing_lua_yaskorost:IsPurgable() return false end
function modifier_boots_of_bearing_lua_yaskorost:RemoveOnDeath() return false end

function modifier_boots_of_bearing_lua_speed_aura:GetModifierAura()
    return "modifier_boots_of_bearing_lua_yaskorost"
end

function modifier_boots_of_bearing_lua_speed_aura:IsAura()
    return true
end


function modifier_boots_of_bearing_lua_yaskorost:DeclareFunctions()
return {
    MODIFIER_PROPERTY_MOVESPEED_BONUS_CONSTANT
}
end

function modifier_boots_of_bearing_lua_yaskorost:GetModifierMoveSpeedBonus_Constant()
    return self:GetAbility():GetSpecialValueFor("aura_movement_speed")
end
----------------------------------------------------Active------------------------------------------------------
function modifier_boots_of_bearing_lua_active:IsHidden() return false end
function modifier_boots_of_bearing_lua_active:IsPurgable() return false end
function modifier_boots_of_bearing_lua_active:RemoveOnDeath() return true end

function modifier_boots_of_bearing_lua_active:DeclareFunctions()
    return {
        MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE,
        MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT
    }
end

function modifier_boots_of_bearing_lua_active:GetModifierMoveSpeedBonus_Percentage()
    return self:GetAbility():GetSpecialValueFor("bonus_movement_speed_pct")
end

function modifier_boots_of_bearing_lua_active:GetModifierAttackSpeedBonus_Constant()
    return self:GetAbility():GetSpecialValueFor("bonus_attack_speed_pct")
end

function modifier_boots_of_bearing_lua_active:OnCreated()
    if IsServer() then
        if not self:GetAbility() then self:Destroy() end
    end

    -- Ability properties
    self.particle_buff = "particles/items_fx/drum_of_endurance_buff.vpcf"
    -- Apply particle effects
    local particle_buff_fx = ParticleManager:CreateParticle(self.particle_buff, PATTACH_ABSORIGIN_FOLLOW, self:GetParent())
    ParticleManager:SetParticleControl(particle_buff_fx, 0, self:GetParent():GetAbsOrigin())
    ParticleManager:SetParticleControl(particle_buff_fx, 1, Vector(0,0,0))
    self:AddParticle(particle_buff_fx, false, false, -1, false, false)
end
---------------------------------------------------GEM1-------------------------------------------------------------
function item_boots_of_bearing_lua_gem1:GetIntrinsicModifierName()
	return "modifier_boots_of_bearing_lua"
end
-----------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua:IsHidden() return true end
function modifier_boots_of_bearing_lua:IsPurgable() return false end
function modifier_boots_of_bearing_lua:RemoveOnDeath() return false end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua:OnCreated()
    if not IsServer() then
        return end
    self:GetParent():AddNewModifier(self:GetParent(),self:GetAbility(),"modifier_boots_of_bearing_lua_speed_aura",nil)
    if IsServer() then
		local bonus = self:GetAbility():GetSpecialValueFor("bonus_gem")
		local gem = string.sub(self:GetAbility():GetName(), -4)
		if gem == "gem1" or gem == "gem2" or gem == "gem3" or gem == "gem4" or gem == "gem5" then
			local modifierName = "modifier_" .. gem
			self.gem_bonus_modifier = self:GetParent():AddNewModifier(self:GetCaster(), self:GetAbility(), modifierName, {stacks = self:GetAbility():GetSpecialValueFor("bonus_gem")})
		end
	end
end
function modifier_boots_of_bearing_lua:OnRefresh()
    local charges = self:GetAbility():GetCurrentCharges()
    self:GetAbility():SetCurrentCharges(charges)
end
function modifier_boots_of_bearing_lua:OnRemoved()
    if not IsServer() then
        return end 
    self:GetParent():RemoveModifierByName("modifier_boots_of_bearing_lua_speed_aura")
end
function modifier_boots_of_bearing_lua:OnDeath(data)
    local ability = self:GetAbility()
    local charges = self:GetAbility():GetCurrentCharges()
    if self:GetParent() == data.attacker then
        ability:SetCurrentCharges(charges + 1)
    end
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua:DeclareFunctions()
    local funcs = 
    {
    MODIFIER_PROPERTY_STATS_STRENGTH_BONUS,
    MODIFIER_PROPERTY_STATS_INTELLECT_BONUS,
    MODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT,
    MODIFIER_PROPERTY_MOVESPEED_BONUS_CONSTANT,
    MODIFIER_EVENT_ON_DEATH,
    }
return funcs
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua:GetModifierBonusStats_Strength()
    return self:GetAbility():GetSpecialValueFor("bonus_str")
end
function modifier_boots_of_bearing_lua:GetModifierBonusStats_Intellect()
    return self:GetAbility():GetSpecialValueFor("bonus_int")
end
function modifier_boots_of_bearing_lua:GetModifierConstantHealthRegen()
    return self:GetAbility():GetSpecialValueFor("bonus_health_regen")
end
function modifier_boots_of_bearing_lua:GetModifierMoveSpeedBonus_Constant()
    return self:GetAbility():GetSpecialValueFor("bonus_movement_speed")
end
----------------------------------------------------------------------------------------------------------
function item_boots_of_bearing_lua_gem1:OnSpellStart()
    if self:GetCurrentCharges() < self:GetSpecialValueFor("charges")
    then return
    end
    EmitSoundOn("DOTA_Item.DoE.Activate", self:GetCaster())
    self:SetCurrentCharges(self:GetCurrentCharges() - self:GetSpecialValueFor("charges"))
    local units = FindUnitsInRadius(self:GetCaster():GetTeam(),
    self:GetCaster():GetOrigin(),
    nil, 
    self:GetSpecialValueFor('radius'),
    DOTA_UNIT_TARGET_TEAM_FRIENDLY, 
    DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
    DOTA_UNIT_TARGET_FLAG_NONE,
    FIND_ANY_ORDER,
    false)
    for __,v in pairs(units) do 
        v:AddNewModifier(self:GetCaster(),self,"modifier_boots_of_bearing_lua_active",{duration = self:GetSpecialValueFor("duration")})
    end
end
---------------------------------------------------GEM2-------------------------------------------------------------
function item_boots_of_bearing_lua_gem2:GetIntrinsicModifierName()
	return "modifier_boots_of_bearing_lua2"
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua2:IsHidden() return true end
function modifier_boots_of_bearing_lua2:IsPurgable() return false end
function modifier_boots_of_bearing_lua2:RemoveOnDeath() return false end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua2:OnCreated()
    if not IsServer() then
        return end
    self:GetParent():AddNewModifier(self:GetParent(),self:GetAbility(),"modifier_boots_of_bearing_lua_speed_aura",nil)
    if IsServer() then
		local bonus = self:GetAbility():GetSpecialValueFor("bonus_gem")
		local gem = string.sub(self:GetAbility():GetName(), -4)
		if gem == "gem1" or gem == "gem2" or gem == "gem3" or gem == "gem4" or gem == "gem5" then
			local modifierName = "modifier_" .. gem
			self.gem_bonus_modifier = self:GetParent():AddNewModifier(self:GetCaster(), self:GetAbility(), modifierName, {stacks = self:GetAbility():GetSpecialValueFor("bonus_gem")})
		end
	end 
end
function modifier_boots_of_bearing_lua2:OnRefresh()
    local charges = self:GetAbility():GetCurrentCharges()
    self:GetAbility():SetCurrentCharges(charges)
end
function modifier_boots_of_bearing_lua2:OnRemoved()
    if not IsServer() then
        return end 
    self:GetParent():RemoveModifierByName("modifier_boots_of_bearing_lua_speed_aura")
end
function modifier_boots_of_bearing_lua2:OnDeath(data)
    local ability = self:GetAbility()
    local charges = self:GetAbility():GetCurrentCharges()
    if self:GetParent() == data.attacker then
        ability:SetCurrentCharges(charges + 1)
    end
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua2:DeclareFunctions()
    local funcs = 
    {
    MODIFIER_PROPERTY_STATS_STRENGTH_BONUS,
    MODIFIER_PROPERTY_STATS_INTELLECT_BONUS,
    MODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT,
    MODIFIER_PROPERTY_MOVESPEED_BONUS_CONSTANT,
    MODIFIER_EVENT_ON_DEATH,
    }
return funcs
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua2:GetModifierBonusStats_Strength()
    return self:GetAbility():GetSpecialValueFor("bonus_str")
end
function modifier_boots_of_bearing_lua2:GetModifierBonusStats_Intellect()
    return self:GetAbility():GetSpecialValueFor("bonus_int")
end
function modifier_boots_of_bearing_lua2:GetModifierConstantHealthRegen()
    return self:GetAbility():GetSpecialValueFor("bonus_health_regen")
end
function modifier_boots_of_bearing_lua2:GetModifierMoveSpeedBonus_Constant()
    return self:GetAbility():GetSpecialValueFor("bonus_movement_speed")
end
----------------------------------------------------------------------------------------------------------
function item_boots_of_bearing_lua_gem2:OnSpellStart()
    if self:GetCurrentCharges() < self:GetSpecialValueFor("charges")
    then return
    end
    EmitSoundOn("DOTA_Item.DoE.Activate", self:GetCaster())
    self:SetCurrentCharges(self:GetCurrentCharges() - self:GetSpecialValueFor("charges"))
    local units = FindUnitsInRadius(self:GetCaster():GetTeam(),
    self:GetCaster():GetOrigin(),
    nil, 
    self:GetSpecialValueFor('radius'),
    DOTA_UNIT_TARGET_TEAM_FRIENDLY, 
    DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
    DOTA_UNIT_TARGET_FLAG_NONE,
    FIND_ANY_ORDER,
    false)
    for __,v in pairs(units) do 
        v:AddNewModifier(self:GetCaster(),self,"modifier_boots_of_bearing_lua_active",{duration = self:GetSpecialValueFor("duration")})
    end
end
---------------------------------------------------GEM3-------------------------------------------------------------
function item_boots_of_bearing_lua_gem3:GetIntrinsicModifierName()
	return "modifier_boots_of_bearing_lua3"
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua3:IsHidden() return true end
function modifier_boots_of_bearing_lua3:IsPurgable() return false end
function modifier_boots_of_bearing_lua3:RemoveOnDeath() return false end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua3:OnCreated()
    if not IsServer() then
        return end
    self:GetParent():AddNewModifier(self:GetParent(),self:GetAbility(),"modifier_boots_of_bearing_lua_speed_aura",nil)
    if IsServer() then
		local bonus = self:GetAbility():GetSpecialValueFor("bonus_gem")
		local gem = string.sub(self:GetAbility():GetName(), -4)
		if gem == "gem1" or gem == "gem2" or gem == "gem3" or gem == "gem4" or gem == "gem5" then
			local modifierName = "modifier_" .. gem
			self.gem_bonus_modifier = self:GetParent():AddNewModifier(self:GetCaster(), self:GetAbility(), modifierName, {stacks = self:GetAbility():GetSpecialValueFor("bonus_gem")})
		end
	end 
end
function modifier_boots_of_bearing_lua3:OnRefresh()
    local charges = self:GetAbility():GetCurrentCharges()
    self:GetAbility():SetCurrentCharges(charges)
end
function modifier_boots_of_bearing_lua3:OnRemoved()
    if not IsServer() then
        return end 
    self:GetParent():RemoveModifierByName("modifier_boots_of_bearing_lua_speed_aura")
end
function modifier_boots_of_bearing_lua3:OnDeath(data)
    local ability = self:GetAbility()
    local charges = self:GetAbility():GetCurrentCharges()
    if self:GetParent() == data.attacker then
        ability:SetCurrentCharges(charges + 1)
    end
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua3:DeclareFunctions()
    local funcs = 
    {
    MODIFIER_PROPERTY_STATS_STRENGTH_BONUS,
    MODIFIER_PROPERTY_STATS_INTELLECT_BONUS,
    MODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT,
    MODIFIER_PROPERTY_MOVESPEED_BONUS_CONSTANT,
    MODIFIER_EVENT_ON_DEATH,
    }
return funcs
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua3:GetModifierBonusStats_Strength()
    return self:GetAbility():GetSpecialValueFor("bonus_str")
end
function modifier_boots_of_bearing_lua3:GetModifierBonusStats_Intellect()
    return self:GetAbility():GetSpecialValueFor("bonus_int")
end
function modifier_boots_of_bearing_lua3:GetModifierConstantHealthRegen()
    return self:GetAbility():GetSpecialValueFor("bonus_health_regen")
end
function modifier_boots_of_bearing_lua3:GetModifierMoveSpeedBonus_Constant()
    return self:GetAbility():GetSpecialValueFor("bonus_movement_speed")
end
----------------------------------------------------------------------------------------------------------
function item_boots_of_bearing_lua_gem3:OnSpellStart()
    if self:GetCurrentCharges() < self:GetSpecialValueFor("charges")
    then return
    end
    EmitSoundOn("DOTA_Item.DoE.Activate", self:GetCaster())
    self:SetCurrentCharges(self:GetCurrentCharges() - self:GetSpecialValueFor("charges"))
    local units = FindUnitsInRadius(self:GetCaster():GetTeam(),
    self:GetCaster():GetOrigin(),
    nil, 
    self:GetSpecialValueFor('radius'),
    DOTA_UNIT_TARGET_TEAM_FRIENDLY, 
    DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
    DOTA_UNIT_TARGET_FLAG_NONE,
    FIND_ANY_ORDER,
    false)
    for __,v in pairs(units) do 
        v:AddNewModifier(self:GetCaster(),self,"modifier_boots_of_bearing_lua_active",{duration = self:GetSpecialValueFor("duration")})
    end
end
---------------------------------------------------GEM4-------------------------------------------------------------
function item_boots_of_bearing_lua_gem4:GetIntrinsicModifierName()
	return "modifier_boots_of_bearing_lua4"
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua4:IsHidden() return true end
function modifier_boots_of_bearing_lua4:IsPurgable() return false end
function modifier_boots_of_bearing_lua4:RemoveOnDeath() return false end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua4:OnCreated()
    if not IsServer() then
        return end
    self:GetParent():AddNewModifier(self:GetParent(),self:GetAbility(),"modifier_boots_of_bearing_lua_speed_aura",nil)
    if IsServer() then
		local bonus = self:GetAbility():GetSpecialValueFor("bonus_gem")
		local gem = string.sub(self:GetAbility():GetName(), -4)
		if gem == "gem1" or gem == "gem2" or gem == "gem3" or gem == "gem4" or gem == "gem5" then
			local modifierName = "modifier_" .. gem
			self.gem_bonus_modifier = self:GetParent():AddNewModifier(self:GetCaster(), self:GetAbility(), modifierName, {stacks = self:GetAbility():GetSpecialValueFor("bonus_gem")})
		end
	end 
end
function modifier_boots_of_bearing_lua4:OnRefresh()
    local charges = self:GetAbility():GetCurrentCharges()
    self:GetAbility():SetCurrentCharges(charges)
end
function modifier_boots_of_bearing_lua4:OnRemoved()
    if not IsServer() then
        return end 
    self:GetParent():RemoveModifierByName("modifier_boots_of_bearing_lua_speed_aura")
end
function modifier_boots_of_bearing_lua:OnDeath(data)
    local ability = self:GetAbility()
    local charges = self:GetAbility():GetCurrentCharges()
    if self:GetParent() == data.attacker then
        ability:SetCurrentCharges(charges + 1)
    end
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua4:DeclareFunctions()
    local funcs = 
    {
    MODIFIER_PROPERTY_STATS_STRENGTH_BONUS,
    MODIFIER_PROPERTY_STATS_INTELLECT_BONUS,
    MODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT,
    MODIFIER_PROPERTY_MOVESPEED_BONUS_CONSTANT,
    MODIFIER_EVENT_ON_DEATH,
    }
return funcs
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua4:GetModifierBonusStats_Strength()
    return self:GetAbility():GetSpecialValueFor("bonus_str")
end
function modifier_boots_of_bearing_lua4:GetModifierBonusStats_Intellect()
    return self:GetAbility():GetSpecialValueFor("bonus_int")
end
function modifier_boots_of_bearing_lua4:GetModifierConstantHealthRegen()
    return self:GetAbility():GetSpecialValueFor("bonus_health_regen")
end
function modifier_boots_of_bearing_lua4:GetModifierMoveSpeedBonus_Constant()
    return self:GetAbility():GetSpecialValueFor("bonus_movement_speed")
end
----------------------------------------------------------------------------------------------------------
function item_boots_of_bearing_lua_gem4:OnSpellStart()
    if self:GetCurrentCharges() < self:GetSpecialValueFor("charges")
    then return
    end
    EmitSoundOn("DOTA_Item.DoE.Activate", self:GetCaster())
    self:SetCurrentCharges(self:GetCurrentCharges() - self:GetSpecialValueFor("charges"))
    local units = FindUnitsInRadius(self:GetCaster():GetTeam(),
    self:GetCaster():GetOrigin(),
    nil, 
    self:GetSpecialValueFor('radius'),
    DOTA_UNIT_TARGET_TEAM_FRIENDLY, 
    DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
    DOTA_UNIT_TARGET_FLAG_NONE,
    FIND_ANY_ORDER,
    false)
    for __,v in pairs(units) do 
        v:AddNewModifier(self:GetCaster(),self,"modifier_boots_of_bearing_lua_active",{duration = self:GetSpecialValueFor("duration")})
    end
end
---------------------------------------------------GEM5-------------------------------------------------------------
function item_boots_of_bearing_lua_gem5:GetIntrinsicModifierName()
	return "modifier_boots_of_bearing_lua5"
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua5:IsHidden() return true end
function modifier_boots_of_bearing_lua5:IsPurgable() return false end
function modifier_boots_of_bearing_lua5:RemoveOnDeath() return false end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua5:OnCreated()
    if not IsServer() then
        return end
    self:GetParent():AddNewModifier(self:GetParent(),self:GetAbility(),"modifier_boots_of_bearing_lua_speed_aura",nil)
    if IsServer() then
		local bonus = self:GetAbility():GetSpecialValueFor("bonus_gem")
		local gem = string.sub(self:GetAbility():GetName(), -4)
		if gem == "gem1" or gem == "gem2" or gem == "gem3" or gem == "gem4" or gem == "gem5" then
			local modifierName = "modifier_" .. gem
			self.gem_bonus_modifier = self:GetParent():AddNewModifier(self:GetCaster(), self:GetAbility(), modifierName, {stacks = self:GetAbility():GetSpecialValueFor("bonus_gem")})
		end
	end 
end
function modifier_boots_of_bearing_lua5:OnRefresh()
    local charges = self:GetAbility():GetCurrentCharges()
    self:GetAbility():SetCurrentCharges(charges)
end
function modifier_boots_of_bearing_lua5:OnRemoved()
    if not IsServer() then
        return end 
    self:GetParent():RemoveModifierByName("modifier_boots_of_bearing_lua_speed_aura")
end
function modifier_boots_of_bearing_lua:OnDeath(data)
    local ability = self:GetAbility()
    local charges = self:GetAbility():GetCurrentCharges()
    if self:GetParent() == data.attacker then
        ability:SetCurrentCharges(charges + 1)
    end
end

----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua5:DeclareFunctions()
    local funcs = 
    {
    MODIFIER_PROPERTY_STATS_STRENGTH_BONUS,
    MODIFIER_PROPERTY_STATS_INTELLECT_BONUS,
    MODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT,
    MODIFIER_PROPERTY_MOVESPEED_BONUS_CONSTANT,
    MODIFIER_EVENT_ON_DEATH,
    }
return funcs
end
----------------------------------------------------------------------------------------------------------
function modifier_boots_of_bearing_lua5:GetModifierBonusStats_Strength()
    return self:GetAbility():GetSpecialValueFor("bonus_str")
end
function modifier_boots_of_bearing_lua5:GetModifierBonusStats_Intellect()
    return self:GetAbility():GetSpecialValueFor("bonus_int")
end
function modifier_boots_of_bearing_lua5:GetModifierConstantHealthRegen()
    return self:GetAbility():GetSpecialValueFor("bonus_health_regen")
end
function modifier_boots_of_bearing_lua5:GetModifierMoveSpeedBonus_Constant()
    return self:GetAbility():GetSpecialValueFor("bonus_movement_speed")
end
----------------------------------------------------------------------------------------------------------
function item_boots_of_bearing_lua_gem5:OnSpellStart()
    if self:GetCurrentCharges() < self:GetSpecialValueFor("charges")
    then return
    end
    EmitSoundOn("DOTA_Item.DoE.Activate", self:GetCaster())
    self:SetCurrentCharges(self:GetCurrentCharges() - self:GetSpecialValueFor("charges"))
    local units = FindUnitsInRadius(self:GetCaster():GetTeam(),
    self:GetCaster():GetOrigin(),
    nil, 
    self:GetSpecialValueFor('radius'),
    DOTA_UNIT_TARGET_TEAM_FRIENDLY, 
    DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_BASIC,
    DOTA_UNIT_TARGET_FLAG_NONE,
    FIND_ANY_ORDER,
    false)
    for __,v in pairs(units) do 
        v:AddNewModifier(self:GetCaster(),self,"modifier_boots_of_bearing_lua_active",{duration = self:GetSpecialValueFor("duration")})
    end
end
----------------------------------------------------------------------------------------------------------
